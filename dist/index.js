"use strict";var e,i=require("process");i.env.PKG_PATH&&(e=require(i.env.PKG_PATH)),i.env.VERSIONS_PATH&&require(i.env.VERSIONS_PATH),module.exports=function(i){var a={updateAvailable:!1,ui:{}};(null==e?void 0:e.version)&&(a.version=e.version);var o=[],t=[];a.on=(e,i)=>{o.push({type:e,callback:i})},a.command=(e,i)=>{t.push({type:e,callback:i})};var s=!1;a.setStartPage=e=>{a.ui.page=e,s=!0};var r=i(a);if(Object.assign({},a,{commands:r}),r)for(let[e,i]of Object.entries(r))figma.command===e&&(s||(a.ui.page=e),i(a),a.ui.open&&(console.log("open?"),figma.showUI(a.ui.html)));figma.ui.onmessage=e=>{for(let i of o)e.type===i.type&&i.callback(e)},a.ui.show=e=>{figma.showUI(a.ui.html,{width:a.ui.width,height:a.ui.height}),figma.ui.postMessage(e)};for(let e of t)figma.command===e.type&&e.callback(a)};
